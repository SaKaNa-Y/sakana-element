/* Select Variables */
.px-select {
  --px-select-item-hover-bg-color: var(--px-fill-color-light);
  --px-select-item-font-size: var(--px-font-size-base);
  --px-select-item-font-color: var(--px-text-color-primary);
  --px-select-item-selected-font-color: var(--px-color-primary);
  --px-select-item-selected-bg-color: var(--px-color-primary-light-9);
  --px-select-item-disabled-font-color: var(--px-text-color-disabled);
  --px-select-input-focus-border-color: var(--px-color-primary);
  --px-select-border-color: var(--px-border-color);
  --px-select-shadow-color: var(--px-shadow-color);
  --px-select-dropdown-bg-color: var(--px-fill-color-blank);
}

/* Base Select Styles - Pixel Dropdown */
.px-select {
  display: inline-block;
  vertical-align: middle;
  line-height: 32px;
  font-family: var(--px-font-family);

  /* Tooltip popper styling - pixel style inherited from Tooltip */
  :deep(.px-tooltip__popper) {
    padding: 0;

    /* Override tooltip background to match select dropdown */
    &::after {
      background: var(--px-select-dropdown-bg-color);
    }
  }

  /* Input with dropdown arrow */
  :deep(.px-input) {
    .header-angle {
      transition: none;

      &.is-active {
        transform: rotate(180deg);
      }
    }
  }

  /* No data / Loading states */
  .px-select__nodata,
  .px-select__loading {
    padding: 12px 16px;
    margin: 0;
    text-align: center;
    color: var(--px-text-color-secondary);
    font-size: var(--px-select-item-font-size);
    font-family: var(--px-font-family);
  }

  /* Menu container */
  .px-select__menu {
    list-style: none;
    margin: 0;
    padding: 4px 0;
    box-sizing: border-box;
  }

  /* Menu items - Pixel list style */
  .px-select__menu-item {
    margin: 0;
    font-size: var(--px-select-item-font-size);
    font-family: var(--px-font-family);
    padding: 0 16px 0 24px;
    position: relative;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    color: var(--px-select-item-font-color);
    height: 36px;
    line-height: 36px;
    box-sizing: border-box;
    cursor: pointer;
    transition: none;

    /* Pixel selector indicator - small square */
    &::before {
      content: '';
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      width: 6px;
      height: 6px;
      background: transparent;
      border: 2px solid transparent;
      z-index: 2;
    }

    /* Background layer for hover/selected states */
    &::after {
      content: '';
      position: absolute;
      inset: 0;
      left: 2px;
      right: 2px;
      background: transparent;
      z-index: -1;
    }

    /* Hover effect */
    &:hover {
      &::after {
        background-color: var(--px-select-item-hover-bg-color);
      }

      &::before {
        border-color: var(--px-hover-border-color);
      }
    }

    /* Selected state with pixel indicator */
    &.is-selected {
      color: var(--px-select-item-selected-font-color);
      font-weight: 500;

      &::after {
        background-color: var(--px-select-item-selected-bg-color);
      }

      &::before {
        background: var(--px-color-primary);
        border-color: var(--px-color-primary);
      }
    }

    /* Highlighted (keyboard navigation) */
    &.is-highlighted {
      &::after {
        background-color: var(--px-select-item-hover-bg-color);
      }

      &::before {
        border-color: var(--px-color-primary);
      }
    }

    /* Disabled state */
    &.is-disabled {
      color: var(--px-select-item-disabled-font-color);
      cursor: not-allowed;

      &:hover {
        &::after {
          background-color: transparent;
        }

        &::before {
          border-color: transparent;
          background: transparent;
        }
      }
    }
  }

  /* First item needs pixel corners on top */
  .px-select__menu-item:first-child {
    &::after {
      top: 2px;
      clip-path: polygon(
        0 2px, 2px 2px, 2px 0, 4px 0,
        calc(100% - 4px) 0, calc(100% - 4px) 2px, calc(100% - 2px) 2px, 100% 2px,
        100% 100%,
        0 100%
      );
    }
  }

  /* Last item needs pixel corners on bottom */
  .px-select__menu-item:last-child {
    &::after {
      bottom: 2px;
      clip-path: polygon(
        0 0,
        100% 0,
        100% calc(100% - 2px), calc(100% - 2px) calc(100% - 2px), calc(100% - 2px) 100%, calc(100% - 4px) 100%,
        4px 100%, 4px 100%, 2px calc(100% - 2px), 0 calc(100% - 2px)
      );
    }
  }

  /* If only one item, needs both top and bottom pixel corners */
  .px-select__menu-item:first-child:last-child {
    &::after {
      top: 2px;
      bottom: 2px;
      clip-path: polygon(
        0 2px, 2px 2px, 2px 0, 4px 0,
        calc(100% - 4px) 0, calc(100% - 4px) 2px, calc(100% - 2px) 2px, 100% 2px,
        100% calc(100% - 2px), calc(100% - 2px) calc(100% - 2px), calc(100% - 2px) 100%, calc(100% - 4px) 100%,
        4px 100%, 4px 100%, 2px calc(100% - 2px), 0 calc(100% - 2px)
      );
    }
  }

  /* Input pointer cursor */
  :deep(.px-input__inner) {
    cursor: pointer;
  }
}
