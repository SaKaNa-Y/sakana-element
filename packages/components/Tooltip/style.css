/* Tooltip Variables */
.px-tooltip {
  --px-popover-bg-color: var(--px-bg-color);
  --px-popover-font-size: var(--px-font-size-base);
  --px-popover-border-color: var(--px-border-color-dark);
  --px-popover-padding: 10px 14px;
  --px-popover-shadow-color: var(--px-shadow-color);
  display: inline-block;
}

/* Base Tooltip Styles - Pixel Game Style */
.px-tooltip {
  /* No smooth transitions for pixel feel */
  .fade-enter-active,
  .fade-leave-active {
    transition: none;
  }

  .fade-enter-from,
  .fade-leave-to {
    opacity: 0;
  }

  /* Popper container - Pixel style box */
  .px-tooltip__popper {
    background: transparent;
    padding: var(--px-popover-padding);
    color: var(--px-text-color-primary);
    line-height: 1.5;
    font-size: var(--px-popover-font-size);
    font-family: var(--px-font-family);
    word-break: break-all;
    box-sizing: border-box;
    z-index: 1000;
    position: relative;

    /* Remove traditional border */
    border: none;

    /* Pixel shadow via drop-shadow (respects clip-path shape) */
    filter: drop-shadow(
      var(--px-shadow-offset-x) var(--px-shadow-offset-y) 0px var(--px-popover-shadow-color)
    );

    /* Border layer — filled with border color, clipped to pixel shape */
    &::before {
      content: "";
      position: absolute;
      inset: 0;
      background: var(--px-popover-border-color);
      clip-path: polygon(
        0 4px,
        2px 4px,
        2px 2px,
        4px 2px,
        4px 0,
        calc(100% - 4px) 0,
        calc(100% - 4px) 2px,
        calc(100% - 2px) 2px,
        calc(100% - 2px) 4px,
        100% 4px,
        100% calc(100% - 4px),
        calc(100% - 2px) calc(100% - 4px),
        calc(100% - 2px) calc(100% - 2px),
        calc(100% - 4px) calc(100% - 2px),
        calc(100% - 4px) 100%,
        4px 100%,
        4px calc(100% - 2px),
        2px calc(100% - 2px),
        2px calc(100% - 4px),
        0 calc(100% - 4px)
      );
      z-index: -1;
    }

    /* Fill layer — inset by border width, filled with bg color */
    &::after {
      content: "";
      position: absolute;
      inset: 2px;
      background: var(--px-popover-bg-color);
      clip-path: polygon(
        0 4px,
        2px 4px,
        2px 2px,
        4px 2px,
        4px 0,
        calc(100% - 4px) 0,
        calc(100% - 4px) 2px,
        calc(100% - 2px) 2px,
        calc(100% - 2px) 4px,
        100% 4px,
        100% calc(100% - 4px),
        calc(100% - 2px) calc(100% - 4px),
        calc(100% - 2px) calc(100% - 2px),
        calc(100% - 4px) calc(100% - 2px),
        calc(100% - 4px) 100%,
        4px 100%,
        4px calc(100% - 2px),
        2px calc(100% - 2px),
        2px calc(100% - 4px),
        0 calc(100% - 4px)
      );
      z-index: -1;
    }

    /* Hide arrow for pixel style - pixel boxes don't need arrows */
    #arrow {
      display: none;
    }
  }
}

/* Dark tooltip variant */
.px-tooltip--dark {
  .px-tooltip__popper {
    --px-popover-bg-color: var(--px-text-color-primary);
    --px-popover-border-color: var(--px-text-color-primary);
    --px-popover-shadow-color: rgba(0, 0, 0, 0.4);
    color: var(--px-bg-color);
  }
}
